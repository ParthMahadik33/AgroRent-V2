<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join Agro-Doctor Network | AgroRent</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mechanics.css') }}">
</head>
<body>
    <div class="page-wrapper">
        <nav class="simple-nav">
            <div class="nav-container">
                <div class="nav-left">
                    <a href="{{ url_for('index') }}">ðŸŒ¾ AgroRent</a>
                </div>
                <div class="nav-actions">
                    <a class="nav-link-btn secondary" href="{{ url_for('mechanics_list') }}">Find Mechanics</a>
                    {% if session.user_id %}
                    <a class="nav-link-btn secondary" href="{{ url_for('mechanic_dashboard') }}">Mechanic Dashboard</a>
                    <a class="nav-link-btn primary" href="{{ url_for('signout') }}">Sign Out</a>
                    {% else %}
                    <a class="nav-link-btn secondary" href="{{ url_for('signin') }}">Sign In</a>
                    <a class="nav-link-btn primary" href="{{ url_for('signup') }}">Create Account</a>
                    {% endif %}
                </div>
            </div>
        </nav>

        <section class="content-section">
            <div class="page-header">
                <h1>Register as an Agro-Doctor</h1>
                <p>List your expertise so farmers nearby can reach you for on-ground repairs.</p>
            </div>

            {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages %}
                    <div class="flash-container">
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">{{ message }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <div class="card">
                <form method="POST" class="mechanic-form">
                    <div class="form-group">
                        <label for="full_name">Full Name *</label>
                        <input type="text" id="full_name" name="full_name" placeholder="Eg: Rakesh Verma" value="{{ form_data.full_name or '' }}" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone / WhatsApp *</label>
                        <input type="text" id="phone" name="phone" placeholder="+91 90000 00000" value="{{ form_data.phone or '' }}" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email (optional)</label>
                        <input type="email" id="email" name="email" placeholder="you@example.com" value="{{ form_data.email or '' }}">
                    </div>

                    <div class="form-group">
                        <label for="experience_years">Years of Experience</label>
                        <input type="number" id="experience_years" name="experience_years" min="0" placeholder="Eg: 5" value="{{ form_data.experience_years or '' }}">
                    </div>

                    <div class="form-group">
                        <label for="specialization">Primary Specialization *</label>
                        <select id="specialization" name="specialization" required>
                            <option value="">Select specialization</option>
                            {% for item in specializations %}
                                <option value="{{ item }}" {% if form_data.specialization == item %}selected{% endif %}>{{ item }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="service_locations">Serviceable Locations *</label>
                        <textarea id="service_locations" name="service_locations" placeholder="Village / town, district, state or pin" required>{{ form_data.service_locations or '' }}</textarea>
                    </div>

                    <div class="form-group">
                        <label for="base_charge">Base Visit Charge (â‚¹) *</label>
                        <input type="number" id="base_charge" name="base_charge" min="0" step="100" placeholder="Eg: 500" value="{{ form_data.base_charge or '' }}" required>
                    </div>

                    <div class="form-group" style="grid-column: 1 / -1;">
                        <label for="description">About you & tools</label>
                        <textarea id="description" name="description" placeholder="Share the brands you know, tools carried, languages spoken etc.">{{ form_data.description or '' }}</textarea>
                        <label class="availability-toggle">
                            <input type="checkbox" name="is_available" {% if form_data.is_available is defined %}{{ form_data.is_available }}{% else %}checked{% endif %}>
                            Available for calls today
                        </label>
                    </div>

                    <div style="grid-column: 1 / -1;">
                        <button type="submit" class="btn-submit">Submit & Join Network</button>
                    </div>
                </form>
            </div>
        </section>
    </div>
</body>
</html>

